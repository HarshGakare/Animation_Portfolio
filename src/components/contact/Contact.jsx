import { motion,animate, useInView } from 'framer-motion';
import './contact.scss';
import { useRef, useState, useEffect } from 'react';
import emailjs from '@emailjs/browser';

const variants = {
    initial: {
        y:500,
        opacity:0,
    },
    animate: {
        y:0,
        opacity:1,
        transition: {
            duration: 0.5,
            staggerChildren: 0.1,
        },
    },
};

const Contact = () => {

    const ref = useRef()
    const formRef = useRef()

    const contactRef = useRef(null);

    const isInView = useInView(ref, { margin: "-100px" });

    useEffect(() => {
        if (isInView) {
            contactRef.current?.scrollIntoView({ behavior: 'smooth' });
        }
    }, [isInView]);

    const sendEmail = (e) => {
        e.preventDefault();
    
        emailjs
            .sendForm('service_db6n69f', 'template_cu9uwz9', formRef.current, 'W43a_OukbZxeV29bL')
            .then(
                () => {
                    console.log('SUCCESS!');
                },
                (error) => {
                    console.log('FAILED...', error.text);
                }
            );
    };
    
    


    return (
        <motion.div id="contact" className='contact' ref={contactRef} variants={variants} initial="initial" whileInView="animate">
            <motion.div className="textContainer" variants={variants}> 
                <motion.h1 variants={variants}>Let's Work Together</motion.h1>
                <motion.div className="item" variants={variants}>
                    <h2>Mail</h2>
                    <span>gakareharsh@gmail.com</span>
                </motion.div>
                <motion.div className="item">
                    <h2>Address</h2>
                    <span>Bhopal, Madhya Pradesh, India</span>
                </motion.div>
                <motion.div className="item">
                    <h2>Phone</h2>
                    <span>+91 7499725914</span>
                </motion.div>
            </motion.div>
            <div className="formContainer">
                <motion.div className="phoneSvg" 
                 initial={{opacity: 1}}
                 whileInView={{opacity: 0}}
                 transition={{delay: 1, duration: 1}}
                 >
<svg width="450" height="450" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="phone-calling_svgrepo.com">
<path  id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M11.7942 7.72975C14.8597 4.5024 19.9302 5.10707 22.4642 8.69103L25.6167 13.1497C27.6435 16.0164 27.4722 20.0018 25.0535 22.5485L24.4412 23.193C24.4395 23.1974 24.4377 23.2023 24.4359 23.2075C24.4035 23.2984 24.3217 23.5878 24.4022 24.1372C24.5691 25.276 25.4482 27.5902 29.0175 31.348C32.5977 35.1172 34.7695 36.0058 35.7757 36.1693C36.21 36.2398 36.437 36.1785 36.5095 36.153L37.531 35.0775C39.7155 32.7775 43.1212 32.3245 45.8675 33.9053L50.6437 36.6543C54.726 39.004 55.6762 44.752 52.4137 48.1868L48.8625 51.9257C47.754 53.0927 46.2425 54.0887 44.375 54.273C39.8152 54.7232 29.2525 54.137 18.179 42.4788C7.84609 31.6 5.88314 22.1378 5.63501 17.5148C5.51241 15.2306 6.53059 13.2714 7.87024 11.861L11.7942 7.72975ZM19.4022 10.8559C18.1214 9.04433 15.8203 8.93623 14.5132 10.3123L10.5892 14.4436C9.76071 15.3158 9.32604 16.3155 9.37961 17.3138C9.58221 21.0883 11.2077 29.694 20.898 39.896C31.0585 50.5932 40.419 50.8952 44.0065 50.5412C44.716 50.4712 45.4457 50.0775 46.1435 49.3433L49.6947 45.6042C51.2267 43.9912 50.8252 41.0855 48.773 39.9045L43.9967 37.1552C42.715 36.4175 41.2135 36.6455 40.25 37.66L39.1112 38.8587L37.7935 37.607C39.1112 38.8587 39.1095 38.8605 39.108 38.8625L39.1042 38.866L39.097 38.8738L39.081 38.89L39.0452 38.9252C39.0195 38.9502 38.9897 38.9775 38.9562 39.007C38.889 39.066 38.8057 39.1332 38.706 39.204C38.5055 39.346 38.2387 39.5023 37.9015 39.6353C37.2115 39.9075 36.3002 40.0535 35.1747 39.8708C32.9807 39.5145 30.1055 37.9387 26.2985 33.9305C22.48 29.9105 21.0186 26.9113 20.6919 24.6809C20.5255 23.5457 20.6586 22.6367 20.9029 21.9503C21.023 21.6127 21.1648 21.3435 21.2956 21.1391C21.3609 21.0372 21.423 20.9519 21.478 20.8824C21.5055 20.8477 21.5311 20.8169 21.5545 20.7901L21.5878 20.7526L21.6031 20.736L21.6104 20.7282L21.6139 20.7245C21.6156 20.7227 21.6173 20.7209 22.9465 21.9833L21.6174 20.7208L22.3344 19.9659C23.4482 18.7933 23.6101 16.8073 22.5547 15.3147L19.4022 10.8559Z" fill="#FE983C"/>
<path id="Vector_2" d="M33.1487 4.69958C33.3142 3.67736 34.2805 2.98393 35.3027 3.14941C35.366 3.16153 35.5697 3.19958 35.6762 3.22333C35.8897 3.27086 36.1872 3.34398 36.5582 3.45206C37.3002 3.66816 38.3367 4.02418 39.5807 4.59451C42.0715 5.73641 45.386 7.73391 48.8255 11.1734C52.265 14.6129 54.2625 17.9274 55.4042 20.4181C55.9747 21.6622 56.3307 22.6987 56.5467 23.4406C56.6547 23.8117 56.728 24.1092 56.7755 24.3225C56.7992 24.4292 56.8167 24.5149 56.8287 24.5781L56.8432 24.6561C57.0085 25.6783 56.3215 26.6848 55.2992 26.8503C54.28 27.0153 53.3197 26.325 53.1502 25.3078C53.145 25.2803 53.1305 25.207 53.1152 25.1378C53.0842 24.9993 53.031 24.7797 52.9465 24.4893C52.7772 23.9085 52.4835 23.0452 51.9955 21.981C51.021 19.8552 49.2685 16.9197 46.1737 13.8251C43.0792 10.7304 40.1437 8.97793 38.018 8.00336C36.9537 7.51546 36.0905 7.22163 35.5095 7.05243C35.2192 6.96786 34.8542 6.88408 34.7157 6.85326C33.6982 6.68368 32.9837 5.71888 33.1487 4.69958Z" fill="#FE983C"/>
<path id="Vector_3" fill-rule="evenodd" clip-rule="evenodd" d="M33.7171 13.3233C34.0016 12.3276 35.0394 11.751 36.0351 12.0355L35.5199 13.8384C36.0351 12.0355 36.0341 12.0353 36.0351 12.0355L36.0386 12.0365L36.0424 12.0376L36.0509 12.0401L36.0701 12.0459L36.1196 12.0613C36.1574 12.0733 36.2044 12.089 36.2606 12.1089C36.3729 12.1488 36.5211 12.2054 36.7031 12.2835C37.0674 12.4395 37.5651 12.6806 38.1764 13.0424C39.4001 13.7666 41.0706 14.9695 43.0329 16.932C44.9954 18.8944 46.1984 20.5649 46.9226 21.7885C47.2844 22.3998 47.5254 22.8975 47.6814 23.2617C47.7594 23.4437 47.8161 23.5921 47.8559 23.7044C47.8759 23.7605 47.8916 23.8076 47.9036 23.8452L47.9191 23.8947L47.9249 23.9141L47.9274 23.9224L47.9284 23.9263C47.9286 23.9272 47.9294 23.9299 46.1266 24.445L47.9294 23.9299C48.2139 24.9256 47.6374 25.9632 46.6416 26.2477C45.6544 26.53 44.6259 25.9655 44.3311 24.9853L44.3219 24.9584C44.3086 24.9208 44.2809 24.8469 44.2346 24.7389C44.1421 24.523 43.9744 24.1699 43.6954 23.6985C43.1379 22.7566 42.1311 21.3335 40.3814 19.5836C38.6314 17.8337 37.2084 16.827 36.2664 16.2695C35.7949 15.9905 35.4419 15.8228 35.2261 15.7302C35.1181 15.684 35.0441 15.6564 35.0066 15.643L34.9796 15.6338C33.9994 15.3391 33.4351 14.3105 33.7171 13.3233Z" fill="#FE983C"/>
</g>
</svg>
                </motion.div>

                <motion.form 
                ref={formRef}
                onSubmit={sendEmail}
                initial={{opacity: 0}}
                whileInView={{opacity: 1}}
                transition={{delay: 2, duration: 1}}
                >
                    <input type="text"  required placeholder='Name' name="name"/>
                    <input type="email"  required placeholder='Email' name="email"/>
                    <textarea rows={8} placeholder='Message' name='message'></textarea>
                    <button  type="submit" value="Send" >Submit</button>
                    
                </motion.form>
    
            </div>
        </motion.div>
    )
};

export default Contact;